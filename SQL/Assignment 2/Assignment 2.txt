                             Assignment 2
1) Create the table Member, Books and Issue without any constraints as
mentioned in the schema description above.
2) View the structure of the tables.

CREATE DATABASE books;
 USE books;
CREATE TABLE member (
    member_id INT UNIQUE,
    memberr_name VARCHAR(30),
    member_address VARCHAR(50),
    ACC_open_date DATE,
    membership_type VARCHAR(20),
    fees_paid INT,
    max_books_allowed INT,
    penalty_amount DECIMAL(7,2)
);

CREATE TABLE book (
    book_no INT,
    book_name VARCHAR(30),
    author_name VARCHAR(30),
    cost DECIMAL(7,2),
    category CHAR(10)
);

CREATE TABLE issue (
    lib_issue_id INT,
    book_no INT,
    member_id INT,
    issue_date DATE,
    return_date DATE
);

DESC member;
DESC book;
DESC issue;

3) Drop the Member table
 DROP table member;


4) Create the table Member again as per the schema description with the
following constraints.
a. Member_Id – Primary Key
b. Membership_type - ‘Lifetime’,’ Annual’, ‘Half Yearly’,’ Quarterly’

CREATE table member
    -> (

    -> member_id INT PRIMARY KEY,
    -> member_name VARCHAR(30),
    -> member_address VARCHAR(50),
    -> acc_open_date DATE,
    -> membership_type VARCHAR(20)CHECK(membership_type IN('Lifetime','Annual','Half Yearly','Quaterly')),
    -> fess_paid INT,
    -> max_books_allowed INT,
    -> penalty_amount DECIMAL(7,2));

5) Modify the table Member increase the width of the member name to 30
characters.

      **ALTER table member**

    **-> MODIFY column member\_name CHAR(30);**




6) Add a column named as Reference of Char(30) to Issue table.
ALTER table issue
    **-> ADD COLUMN referance CHAR(30);**




8) Rename the table Issue to Lib_Issue.
ALTER table issue
    **-> RENAME lib_issue;**







9) Insert following data in table Member
INSERT into member (member_id,member_name,member_address,acc_open_date,membership_type,fess_paid,max_books_allowed,penalty_amount) VALUES (1,"Richa Sharma","PUNE","10-12-05","Lifetime",25000,5,50);


10) Insert at least 5 records with suitable data.
DONE

11) Modify the column Member_name. Decrease the width of the member
name to 20 characters. (If it does not allow state the reason for that)
ALTER TABLE member
    -> MODIFY member_name CHAR(20);

12) Try to insert a record with Max_Books_Allowed = 110, Observe the
error that comes.
UPDATE member
    -> SET max_books_allowed = 110
    -> WHERE member_id =5;

13) Generate another table named Member101 using a Create command
along with a simple SQL query on member table.


14) Add the constraints on columns max_books_allowed and penalty_amt
as follows
a. max_books_allowed < 100
b. penalty_amt maximum 1000
Also give names to the constraints.
 ALTER TABLE member
    -> ADD CONSTRAINT chk_book_limit CHECK (max_books_allowed <= 100);

15) Drop the table books.
DROP TABLE book;


16)Create table Books again as per the schema description with the
following constraints.
a. Book_No – Primary Key
b. Book_Name – Not Null
c. Category – System, Fiction, Database, RDBMS, Others.
 CREATE TABLE book
    -> (
    -> book_no INT primary KEY,
    -> book_name VARCHAR(70) NOT NULL,
    -> author VARCHAR (20),
    -> category ENUM('System', 'Fiction', 'Database', 'RDBMS', 'Others'),
    -> cost INT (5));

17) Insert data in Book table as follows:

INSERT INTO book
    -> (book_no,book_name,author,category,cost) VALUES
    -> (101,"Let Us C","Denis Ritchie",'System',450),
    -> (102,"Oracle - Complete Ref","Loni",'Database',550),
    -> (103,"Mastering SQL","Loni",'Database',250),
    -> (104,"PL SQL -Ref","Scott Urman",'Database',750);

18) Insert more records in Book table.
INSERT INTO book (book_no, book_name, author, category, cost)
VALUES (105, 'Learning MySQL', 'Loni', 'Database', 250);


19) View the data in the tables using simple SQL query.
SELECT * FROM book;

20) Insert into Book following data.

 INSERT INTO book
    -> (book_no,book_name,author,category,cost) VALUES
    -> (106,"Nationnal Geographic","Adis Scott",'System',1000);


21,22)
 ALTER TABLE lib_issue
    -> RENAME TO issue;


23) As per the given structure Create table Issue again with following
constraints.
 CREATE TABLE issue
    -> (
    -> lib_issue_no INT PRIMARY KEY,
    -> book_no INT,
    -> member_id INT,
    -> issue_date DATE,
    -> return_date DATE,
    -> CONSTRAINT fk_book FOREIGN KEY (book_no) references book(book_no),
    -> CONSTRAINT fk_member FOREIGN KEY (member_id) references member(member_id));

24)Insert following data into Issue table.
INSERT INTO Issue
(lib_issue_no, book_no, member_id, issue_date) VALUES
(7001, 101, 1, '2010-11-06'),
(7002, 102, 2, '2025-11-06'),
(7003, 104, 1, '2015-01-06'),
(7004, 101, 1, '2004-07-06'),
(7005, 104, 2, '2015-10-06'),
(7006, 101, 3, '2018-02-06');

25) Remove the constraints on Issue table
ALTER TABLE issue
    -> DROP FOREIGN KEY fk_book;
    -> DROP FOREIGN KEY fk_member;


26) Insert a record in Issue table. The member_id should not exist in member table.
INSERT INTO Issue (lib_issue_no, book_no, member_id)
    -> VALUES (1, 101, 99);

27) Now enable the constraints of Issue table. Observe the error
Duplicate check constraint name 'chk_book_limit'.



28) Delete the record inserted at Q-27) and enable the constraints.
 DELETE FROM issue
    -> WHERE lib_issue_no =1;

29) Try to delete the record of member id 1 from member table and observe the error .
DELETE FROM issue
    -> WHERE member_id =1;

30) View the data and structure of all the three tables Member,Issue, Book.
DESC member;
 SELECT * FROM member;
[same as it is]


31) Modify the Return_Date of 7004,7005 to 15 days after the Issue_date.
UPDATE issue
    -> SET return_date = '2015-10-21'
    -> WHERE lib_issue_no = 7005;

32) Remove all the records from Issue table where member_ID is 1
and Issue date in before 10-Dec-06.
DELETE FROM Issue
WHERE member_id = 1
  AND issue_date < '2006-12-10';


33) Remove all the records from Book table with category other than RDBMS and Database.
 DELETE FROM book
    -> WHERE category NOT IN ('RDBMS','Database');


34) Remove the table Member.
35) Remove the table Book.
DROP TABLE member;
DROP TABLE book;

